<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Testimonials</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

  <div class="container">
    <h2 class="mb-3">Add Testimonial</h2>

    <!-- Name input -->
    <div class="mb-3 row">
      <label class="col-sm-2 col-form-label bg-primary text-white text-center">Name</label>
      <div class="col-sm-10">
        <input type="text" id="name" class="form-control" placeholder="Your Name">
      </div>
    </div>

    <!-- Message input -->
    <div class="mb-3 row">
      <label class="col-sm-2 col-form-label bg-primary text-white text-center">Message</label>
      <div class="col-sm-10">
        <input type="text" id="message" class="form-control" placeholder="Enter your Message">
      </div>
    </div>

    <!-- Submit/Update button aligned with text boxes -->
    <div class="row mb-3">
      <div class="col-sm-2"></div>
      <div class="col-sm-10">
        <button id="submitBtn" class="btn btn-success" onclick="addOrUpdateTestimonial()">Submit</button>
      </div>
    </div>

    <hr>
    <h3>Testimonials</h3>
    <div id="testimonialList"></div>
  </div>

  <script>
    let editingCard = null; // Tracks the card being edited

    function addOrUpdateTestimonial() {
      let name = document.getElementById("name").value.trim();
      let message = document.getElementById("message").value.trim();
      let submitBtn = document.getElementById("submitBtn");

      if (name === "" || message === "") {
        alert("Please enter both name and message!");
        return;
      }

      if (editingCard) {
        // Update existing testimonial
        editingCard.querySelector(".card-title").textContent = name;
        editingCard.querySelector(".card-text").textContent = message;

        // Reset button back to Submit
        submitBtn.textContent = "Submit";
        editingCard = null;
      } else {
        // Create new testimonial
        let testimonialCard = document.createElement("div");
        testimonialCard.className = "card mb-3";

        let cardBody = document.createElement("div");
        cardBody.className = "card-body";

        let nameEl = document.createElement("h5");
        nameEl.className = "card-title";
        nameEl.textContent = name;

        let messageEl = document.createElement("p");
        messageEl.className = "card-text";
        messageEl.textContent = message;

        let actionDiv = document.createElement("div");
        actionDiv.className = "text-end";

        // Edit button
        let editBtn = document.createElement("button");
        editBtn.className = "btn btn-success btn-sm me-2";
        editBtn.textContent = "Edit";
        editBtn.onclick = function () {
          document.getElementById("name").value = nameEl.textContent;
          document.getElementById("message").value = messageEl.textContent;
          submitBtn.textContent = "Update";
          editingCard = testimonialCard;
        };

        // Delete button (red color)
        let deleteBtn = document.createElement("button");
        deleteBtn.className = "btn btn-danger btn-sm";
        deleteBtn.textContent = "Delete";
        deleteBtn.onclick = function () {
          testimonialCard.remove();
          if (editingCard === testimonialCard) {
            editingCard = null;
            submitBtn.textContent = "Submit";
          }
        };

        actionDiv.appendChild(editBtn);
        actionDiv.appendChild(deleteBtn);

        cardBody.appendChild(nameEl);
        cardBody.appendChild(messageEl);
        cardBody.appendChild(actionDiv);

        testimonialCard.appendChild(cardBody);

        document.getElementById("testimonialList").appendChild(testimonialCard);
      }

      // Clear inputs
      document.getElementById("name").value = "";
      document.getElementById("message").value = "";
    }
  </script>

</body>
</html>
